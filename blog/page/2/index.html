
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Robin David</title>
  <meta name="author" content="Robin David">

  
  <meta name="description" content="compile() Can compile on the fly new python code with the given string into python instructions &gt;&gt;&gt; eval_code = compile('100 + 200', '', ' &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.robindavid.fr/blog/page/2/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
   <link href="/stylesheets/data-table.css" media="screen, projection" rel="stylesheet" type="text/css" />
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Robin David" type="application/atom+xml">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">

<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=Lato:400,100,100italic,300,300italic,400italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Lora:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Source+Code+Pro:200,300,400,500,600,700,900' rel='stylesheet' type='text/css'>




  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-48325647-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


  <style>html{background: url("/images/background.png") no-repeat center center fixed;-webkit-background-size: cover;-moz-background-size: cover;-o-background-size: cover;background-size: cover;}</style>
</head>

<body   >
  <header role="banner"><hgroup>
</hgroup>

</header>
  <!-- <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.robindavid.fr" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav> -->
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/06/13/python-memo/">Python Memo</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-06-13T00:00:00+00:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><br/>
<ul>
	<li><strong>compile()</strong>
	Can compile on the fly new python code with the given string into python instructions
<br/>
<code>
&gt;&gt;&gt; eval_code = compile('100 + 200', '', 'eval')<br/>
&gt;&gt;&gt; eval(eval_code)<br/>
300
</code><br/>
<span style="color: #0000ff;">Note:It can also compile all file etc.</span></li>
<br/>
	<li><strong>sys.exitfunc()</strong>
Do nothing by default, but can be overwritten and is called when sys.exit() is called<br/>
<code>import sys<br/>
def my_exit_func(old_exit = prev_exit_func):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;# perform cleanup<br/>
sys.exitfunc = my_exit_func #Override old function with our.
</code>
</li>

<br/>
	<li><strong>urlparse</strong>
	with URL component: <em>scheme://net_loc/path;params?query#frag</em><br/>
<code>
import urlparse<br/>
urlparse("http://www.google.fr/test/index.html?val=1&amp;test=2#foo")<br/>
ParseResult(scheme='http', netloc='www.google.fr', path='/test/index.html', params='', query='val=1&amp;test=2', fragment='foo')<br/>
#note:  urlunparse do exactly the reverse and take a tuple of 6
</code>
<br/>
<li><strong>urlencode</strong><br/>
<code>
import urllib<br/>
aDict = { 'name': 'Georgina Garcia', 'hmdir': '~ggarcia' }<br/>
urllib.urlencode(aDict)<br/>
'name=Georgina+Garcia&amp;hmdir=%7eggarcia'<br/>
</code>
</li>

<br/>
<li><strong>Call C functions Windows</strong><br/>
<code>
from ctypes import cdll<br/>
msvcrt = cdll.msvcrt #Printf is in the msvcrt DLL<br/>
message = "Hello World!\n"<br/>
msvcrt.printf("Testing: %s", message)<br/>
</code>
</li>
<br/>

<li><strong>Call C functions Linux</strong><br/>
<code>
from ctypes import *<br/>
libc = CDLL("libc.so.6")<br/>
message_string = "Hello world!\n"<br/>
libc.printf("Testing: %s", message_string)<br/>
</code>
</li>

</ul>
<br/><br/>

<h3> Other memo </h3>

<ul>
	<li><p>str = &#8220;Python&#8221;<br/>
	<strong>&#8216;ton&#8217; in str</strong> Return false could be used with a if without regex<br/>
	<strong>&#8216;thon&#8217; in str</strong> Return true</p></li>

<br/>
<li><p><strong>[i for i in range(10)]</strong> # Return [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]<br/>
<strong>[i for i in range(10) if i % 2 == 0] </strong># Return [0, 2, 4, 6, 8]<br/>
<strong>[i*2 for i in range(10)]</strong> # Return [0, 2, 4, 6, 8, 10, 12, 14, 16, 18]<br/>
So it is possible in one line to pass through all array element and do something on them (but not printing)</p></li>
<br/>
	<li>Ternary operator: <strong>C ? T : F</strong> means: if T if C else F</li>
<br/>
<li>max = x if x &gt; y else Y</li>
<br/>
<li>MD5 usage:<br/>
<code>
from hashlib import md5<br/>
hash = md5("Hello world")<br/>
print hash.digest().encode('hex')<br/>
</code>
</li>

<br/>

<li><strong>sys.stdout.write(&#8220;Hello World\n&#8221;)</strong> alternate way to print Hello world writing directly stdout</li>

<br/>

	<li><strong>sys.stdin.readline()</strong> read directly a line on the stdin</li>
<br/>

	<li><strong>print(text, end=&#8221; &#8220;) </strong> in python 3.x define the end character instead of jump line it will add a space</li>
<br/>

	<li>Anonymous function:<br/> def add-one(x): <br/>&nbsp;&nbsp;&nbsp;&nbsp;return x + 1<br/> Could be substitued by: <br/><strong>add_one = lambda x: x + 1</strong></li><br/>
	<li><span style="text-decoration: underline;">Procedural</span>: <strong>my_str = string.split(my_str)</strong><span style="color: #0000ff;"> #Note: Need to import string</span></li>
	<li><span style="text-decoration: underline;">Object Oriented</span>: <strong>my_str = my_str.split()</strong> <span style="color: #0000ff;">#Note: Could create a string on the fly if needed with: &#8221;.split()</span></li><br/>
	<li><strong>round()</strong> Round the float to the given precision ex: <br/><span style="color: #008000;">&#8217;%.2f&#8217; % round(1.185, 2) # Return 1.19</span></li><br/>
	<li><strong>isinstance()</strong></li>
	<li><strong>issubclass()</strong> <span style="color: #0000ff;">#Note: without self it is a static function attribute</span></li><br/>
	<li><strong>cmp()</strong> Compare two object, return 0 if equal</li>
	<li><strong>str()</strong> Return a printable format of an object</li><br/>
	<li>String formating <br/><strong>&#8220;Name: %s, age: %d&#8221; % (&#8216;Dave&#8217;,23)</strong> Specify the type expected for variable <strong><br/>&#8220;Name: {0}, age: {1}&#8221;.format(&#8216;Dave&#8217;,23)</strong> Here format determine the type of the variableso it works in all cases.</li><br/>
	<li><strong>&#8220;My string&#8221;.replace(&#8220;i&#8221;,&#8221;j&#8221;)</strong> Easy way to replace elements in a string</li>
	<li><strong>&#8220;My string&#8221;.find(&#8220;my&#8221;)</strong> -1 not found, 0 equal, 2 found <span style="color: #0000ff;">Note: This two do not support regular expression</span></li><br/>
	<li><strong>&#8220;My string&#8221;.center(25)</strong> Return the string with 25 spaces before and after</li><br/>
	<li>Miscellanous string transformations<br/> test = &#8220;python is cool&#8221; <br/><strong>test.title()</strong> Return &#8220;Python Is Cool&#8221; <br/><strong>test.swapcase()</strong> Return &#8220;pYTHON iS cOOL&#8221; <br/><strong>test.isalpha() </strong>Return True if ALL character are alphabetics (.!, excluded)</li><br/>
	<li>test = [2,1,5,3] <strong>test.sort()</strong> <br/>Return [1, 2, 3, 5]</li><br/>
	<li><strong>y = copy.deepcopy(x)</strong> <br/>Copy object into x and not only just references, because otherwise change y modify x also. <span style="color: #0000ff;"><br/>Note: Originally made for compute efficiency reasons.</span></li><br/>
	<li><strong>ord(&#8216;A&#8217;)</strong> Return the decimal value of &#8216;A&#8217; (65)</li>
	<br/>

	<li><strong>sum([2,3,4])</strong>
Return the sum of the list</li>
<br/>
	<li><strong>int(&#8220;4&#8221;)</strong>
This transform the string 4 into integer 4
<span style="color: #0000ff;">Note: It is the same for float(), and complex()</span></li>
<br/>
	<li><strong>del(self)</strong>
Kill an object itself</li>
<br/>
	<li><strong>def my_func(a=0,b=0)</strong>
Could specify the name of a variable in a function call ex:
my_fun(b=0) <span style="color: #0000ff;"># if we had put only 0 it would be the &#8220;a&#8221; variable</span></li>
<br/>
	<li><strong>global var</strong> #define a global variables</li>
	<li><strong>local var </strong> #define a variable in the block</li>
<br/>
	<li><strong>var1 = var2 = &#8220;hello&#8221; </strong>#Assign the same value for two differents variables</li>
	<li><strong>var1,var2 = &#8220;Hello&#8221;,1 </strong> #Assign two variables on one line</li>
<br/>
	<li><span style="color: #0000ff;">Note : raw_input doesn&#8217;t exist anymore in python 3.2 and input accept string in 3.2</span></li>
<br/>
	<li> Other types:
<strong>- complex</strong>
<strong>- bool</strong></li>
<br/>
	<li><strong>*</strong> is a tuple</li>
	<li><strong>**</strong> is a dictionnary
#used for varargs&#8217;s declaration</li>
<br/>
	<li>Dictionnary
<strong>d.get{&#8216;key1&#8217;,&#8221;N/A&#8221;} </strong> # Return the key if it exists the 2nd argument if not.
<strong>c = set(a)</strong> # Create a set with &#8220;a&#8221; a list</li>
<br/>
	<li>IN PYTHON 3 a string is a byte array with an encoding. So a string is excpected you should use:
<strong>bytes(&#8216;my message\n&#8217;,&#8217;utf-8&#8217;)</strong>
#Or Send directly the string but could fail</li>
</ul>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/04/24/xdotool-xwininfo-memo/">Xdotool + Xwininfo Memo</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-04-24T00:00:00+00:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content">First of all, I know that the text written below could be found in the xdotool man, but this summarize it and allow a quick acess to few examples and the more important arguments.

I discovered it quite randomly by looking for a way to access keyboard keys in python. I finally analysed what we could do with xdotool it is really amazing. xdotool is a software which allow manipulate keyboard, mouse and windows of the X server. It can by this way completely replace the user in front of his computer, and allow automate tasks that cannot be done in command line. It is the Unix equivalent for AutoIt in Windows. This increase considerably the power of bash scripts and consolidate my idea that we can do almost everything in bash. Below the more interesting commands:

&nbsp;
<ul>
	<li><strong>xdotool getactivewindow</strong>
Return the active window</li>
<br/>
	<li><strong>xwininfo -id 2784333</strong>
Give information about the given window, like size, coordinate and graphical aspect</li>
<br/>
	<li> <strong>xdotool getmouselocation &#8211;shell</strong>
Return the mouse location, with X, Y and the Display Number(could have multiple X server)
&#8211;sheel format the returned string to be &#8220;eval&#8221; if needed.

The script below show in live the mouse position.
<pre>
<span style="color: #009900;">#!/bin/bash</span>

<span style="color: #0000ff;">while</span> ((<span style="color: #ff0000;">1</span>)) ; <span style="color: #0000ff;">do</span>
        eval $(xdotool getmouselocation --shell)
        echo -e <span style="color: #888888;">"X=$X\tY=$Y\r\c"</span>
<span style="color: #0000ff;">done</span></pre></li>
<br/>
	<li>Send Keys:
<strong>xdotool key F2</strong>
It exist also keydown, and keyup which I think could be understood as keypressed and key released(not tested)</li>
<br/>
	<li>Type text:
<strong>xdotool type &#8216;Hello world!&#8217;</strong>Type the given text as if it were the user.</li>
<br/>
	<li>Mouse move:
<strong>xdotool mousemove 0 0</strong>
Move the mouse cursor to the position x=0, y=0</li>
<br/>
	<li><strong>xdotool mousemove_relative 10 10</strong>
Same as mousemove but relatively to the current position of the mouse</li>
<br/>
	<li>Click:
<strong>xdotool click 1</strong>
<span style="color: #0000ff;">Note 1:Left, 2:Middle, 3:Right, 4:wheel up, 5:wheel down</span>
There is also mouseup and mousedown (which is the same than keys of keyboard)</li>
<br/>
	<li>Search
<strong>xdotool search &#8211;onlyvisible &#8211;name &#8220;^Opera$&#8221;</strong>
Research in window name with the regex pattern given
The other interesting args are:
&#8211;pid PID #specify a pid(more accurate than string search and unique)</li>
<br/>
	<li><strong>getwindowfocus</strong> Return the window focused</li>
<br/>
	<li><strong>xdpyinfo | awk &#8216;/dimensions:/ {split($2,nf,&#8221;x&#8221;);print &#8220;width=&#8221;nf[1];print &#8220;height=&#8221;nf[2];exit }&#8217;</strong>
This have nothing to see with xdotool but return screen resolution in a formated way to be eval in bash</li>
<br/>
	<li><strong>xdotool windowsize 3447722 300 300</strong> Change the size of the given window</li>
<br/>
	<li><strong>xdotool windowmove 34734345 200 200</strong>
Move the given window to the given position</li>
<br/>
	<li><strong>xdotool windowmap 34734345 200 200</strong>
Put the given window on the foreground(normally)
The reverse is &#8220;windowunmap&#8221; which hide the given window</li>
</ul>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/11/29/fix-wireless-in-cli/">Fix Wireless Connection in CLI</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-29T00:00:00+00:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>WEP connection</h2>
We suppose in this example that our wireless interface is wlan0.
<br/>
<strong>iwconfig wlan0 mode managed key [WEP key]<br/>
iwconfig wlan0 essid &#8220;[ESSID]&#8221;</strong>
<br/>
If you use DHCP do:<br/>
<strong>dhclient wlan0</strong><br/>
else do:<br/>
<strong>ifconfig wlan0 [IP address] netmask [subnetmask]<br/>
route add default gw [IP of default gateway]</strong><br/>
<br/>
<span style="color: #0000ff;"> (Configure your default gateway; usually the IP of the Access Point)</span><br/><br/>

<strong>echo nameserver [IP address of DNS server]  &gt;&gt;  /etc/resolve.conf</strong><br/>

<span style="color: #0000ff;"> (Configure your DNS server)</span>
<br/><br/>
<h2>WPA Connection</h2>
The WPA is harder than wep, because you have to define the WPA type (PSK&#8230;).

To make it work you need first to install two packages: <strong>wireless-tools wpasupplicant.</strong><br/><br/>

Edit <strong>/etc/network/interfaces</strong> and put:
<p style="padding-left: 30px;">If you are in DHCP:</p>
<p style="padding-left: 60px;"><strong>auto wlan0</strong></p>
<p style="padding-left: 60px;"><strong> </strong><strong>iface wlan0 inet dhcp</strong><strong> </strong></p>
<p style="padding-left: 90px;"><strong>wpa-conf /etc/wpa_supplicant/wpa_supplicant.conf</strong></p>
<p style="padding-left: 30px;">If you are in static:</p>
<p style="padding-left: 60px;"><strong>auto wlan0</strong><br/>
<strong>iface eth0 inet static</strong><br/>
<strong style="padding-left: 30px;">address 192.168.0.100v</strong><br/>
<strong style="padding-left: 30px;" >network 192.168.0.0</strong><br/>
<strong style="padding-left: 30px;" >netmask 255.255.255.0</strong><br/>
<strong style="padding-left: 30px;" >broadcast 192.168.0.255</strong><br/>
<span style="color: #0000ff;">#Of course depending of your network your values can be differents</span></p><br/>
Now edit <strong>/etc/wpa_supplicant/wpa_supplicant.conf</strong> and put:<br/>

<strong>ctrl_interface=/var/run/wpa_supplicant</strong><strong><br/>
</strong><strong>eapol_version=1</strong><strong><br/>
</strong><strong>ap_scan=1</strong><strong><br/>
</strong><strong>fast_reauth=1</strong><strong><br/>
</strong>
<br/>

<strong>network={</strong><strong><br/>

</strong><strong> ssid=nameofNetwork</strong><strong><br/>
</strong><strong> scan_ssid=1</strong><strong><br/>
</strong><strong> proto=WPA</strong><strong><br/>
</strong><strong> key_mgmt=WPA-PSK</strong><strong><br/>
</strong><strong> psk=passwordOfNetwork</strong><strong><br/>
</strong><strong> priority=5</strong><strong><br/>
</strong><strong>} </strong><br/>

<span style="color: #0000ff;">#You should change values if the network is in WPA2 for example.. </span>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/11/20/autoit-memo/">AutoIt Memo</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-20T00:00:00+00:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content">Below basics and examples about AutoIt, which is a pretty good script language :).<br/>
<ul>
	<li><strong>Basic message box:</strong></li>
</ul>
<p style="padding-left: 30px;">MsgBox(0, &#8220;Tuto&#8221;, &#8220;Hello World!&#8221;)</p>
<br/>
<ul>
	<li><strong>Variable: </strong>
<ul>
	<li>Global $var=&#8221;hello&#8221;<span style="color: #0000ff;"> #Define a global var(exist in include too), There is also Dim(global in the current file), and local which is local to function or block</span></li>
	<li>my_array[5] = [1,2,3,4,5] <span style="color: #0000ff;"># Define an array</span></li>
</ul>
</li><br/>
	<li><strong>Few interesting global vars:</strong>
<ul>
	<li>@ScriptDir: path to the script <span style="color: #0000ff;">#The most used</span></li>
	<li>@CRLF: equivalent to \n</li>
	<li>@TempDir, @MyDocumentsDir, @SystemDir, @ProgramFilesDir</li>
</ul>
</li><br/>
	<li><strong>Operators: </strong>
<ul>
	<li>They are classicals except (== is =) and (!= is &lt;&gt;)</li>
</ul>
</li>
</ul><br/>
<ul>
	<li>If $var = 1 Then <span style="color: #0000ff;"># Could use ()</span>
ElseIf $var &gt;= 2 Then
EndIf</li>
</ul><br/>
<ul>
	<li>Select
Case ($var &lt;= 0)
<span style="color: #0000ff;"> #etc</span>
EndSelect</li><br/>
	<li>Switch $var
Case 1 To 10
<span style="color: #0000ff;"> #etc&#8230;</span>
EndSwitch</li>
</ul><br/>
<ul>
	<li><strong>Input box</strong></li>
</ul>
<p style="padding-left: 30px;">$input = InputBox(&#8220;Tuto&#8221;, &#8220;Entrer password :&#8221;)
If @error
<span style="color: #0000ff;"># If the user click on cancel..</span></p>
<br/>
<ul>
	<li>For $i = 0 To 10
msgbox(0,&#8221;Tutoriel&#8221;, $i)
Next
<span style="color: #0000ff;">Note: By default the step is 1, but you do for instance For $i =0 To 10 Step 2 or -1</span></li><br/>
	<li>While ( $quit &lt;&gt; 1 ) # Could be While 1
<span style="color: #0000ff;"># continue</span>
WEnd</li><br/>
	<li><strong>Sleep(1000)</strong></li>
</ul>
<p style="padding-left: 30px;">Will sleep 1 second</p>
<br/>
<ul>
	<li>Do
<span style="color: #0000ff;">#actions</span>
Until ($my_var1 &lt;&gt; 0)</li><br/>
	<li>Func my_function ($param1, $param2 = &#8220;&#8221;)
<span style="color: #0000ff;"> # code</span>
Return 1
EndFunc
Declare a function with  two arguments
<span style="color: #0000ff;">Note: param 2 is optionnal and take the default value instead</span></li><br/>
	<li><strong>Func my_function(ByRef $my_var)</strong>
Reference a variable, so it&#8217;s the given variable which will be modified and not the &#8220;copy&#8221;</li><br/>
	<li><strong>#include &#8220;path/myscript.au3&#8221;
#include &lt;String.au3&gt;</strong>
Use &lt;&gt; for the same reason as in C (will take libraries in include folder of AutoIt</li><br/>
	<li><strong>Get mouse position</strong></li>
</ul>
<p style="padding-left: 30px;">$pos = MouseGetPos()</p>
<p style="padding-left: 30px;">$x = $pos[0]</p>
<p style="padding-left: 30px;">$y = $pos[1]</p>
<br/>
<ul>
	<li><span style="color: #333333;"><strong>$Menu_File = GuiCtrlCreateMenu(&#8220;&amp;File&#8221;)</strong></span></li>
</ul>
<p style="padding-left: 30px;">Create new Menu and to create element in this menu do:</p>
<p style="padding-left: 30px;">$Menu_File_Exit = GUICtrlCreateMenuItem(&#8220;&amp;Exit&#8221;, $Menu_File)</p>
<p style="padding-left: 30px;">We give the parent in argument</p>
<br/>
<ul>
	<li><strong>If _IsPressed(25)</strong></li>
</ul>
<p style="padding-left: 30px;">Test if space bar is pressed</p>
<p style="padding-left: 30px;"><span style="color: #0000ff;">Note: Need to include &lt;Misc.au3&gt;</span></p>
<br/>
<ul>
	<li><strong>$pos = WinGetPos(&#8220;Untitled - Notepad&#8221;)</strong></li>
</ul>
<p style="padding-left: 30px;">Get the position of the given window (in this case Notepad)</p>
<p style="padding-left: 30px;">x=pos[0], y=pos[1], width=pos[2], height=post[3]</p>
<br/>
<ul>
	<li><strong>MouseClick(&#8220;left&#8221;,100,100)</strong></li>
</ul>
<p style="padding-left: 30px;">Execute a left click to the given coordinate</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/11/14/networked-services/">Networked Services Memo</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-14T00:00:00+00:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Basic admin</h3>

<ul>
	<li><strong>?</strong> -&gt; wildcard for one char</li><br/>
	<li><strong>chgrp</strong>: change the group of a file or a folder</li><br/>
	<li><strong>du -s -h [folder] </strong> give you the total file size of the folder or a file</li><br/>
	<li><strong>umask</strong> example to give rwx-r-x&#8212;x (751) umask -&gt; 026</li><br/>
	<li><strong>sort -n -k 4 -t &#8220;:&#8221;</strong> : sort numerically using the column 4 using the character separator &#8220;:&#8221;</li><br/>
	<li><strong>find /home -newer file </strong> Find in /home files newer than &#8220;file&#8221;</li><br/>
	<li><strong>find /usr/ -size -2 -exec cp {} /home/ \; </strong> find in /usr files lower than 2 blocs and copy them to /home/</li><br/>
	<li><strong>egrep &#8220;a.*e.*i.*u.*o&#8221; /root/words </strong> grep lines containing in the order a e i o u</li><br/>
	<li><strong>egrep &#8220;(.{4}).*\1&#8221; /root/words </strong> grep lines containing at least two times the same pattern of 4 chars</li><br/>
	<li><strong>pidof syslogd </strong> get the pidof syslog</li><br/>
	<li><strong>chkconfig &#8211;list</strong> list the services theirs run level etc</li><br/>
	<li><strong>tcpdump -i eth0 not port 23 and not port 22 </strong> capture traffic of eth0 but not incoming from port 22 and 23</li><br/>
	<li><strong>ip route</strong>: show a basic routing table</li>
</ul>
<br/><br/>

<h3>Networking</h3>
<ul>
	<li>Configuring manually ip with ifconfig:
<ul>
	<li><strong>ifconfig eth0 10.0.50.10 broadcast 10.0.50.255 netmask 255.255.255.0</strong></li>
</ul>
</li><br/>
	<li>Configuring manually ip with ip:
<ul>
	<li><strong>ip route append 10.0.50.10 dev eth0 table main</strong></li>
	<li><strong>ip route append default via 10.0.50.254</strong></li>
</ul>
</li><br/>
	<li><strong>route -n</strong>: show the routing table</li><br/><li><strong>cat /proc/net/arp</strong>: show MAC address, in memory</li>
	<li>Run level directory: <strong>/etc/rd?.d</strong></li>
	<li>Runlevel states are:</li>
	<li>
<ul>
	<li>– D uninterruptible sleep (usually IO)</li>
	<li>– R runnable (on run queue)</li>
	<li>– S sleeping</li>
	<li>– T traced or stopped</li>
	<li>– W paging</li>
	<li>– X dead</li>
	<li>– Z a defunct (&#8220;zombie&#8221;) process</li>
	<li>– W has no resident pages</li>
	<li>– &lt; high-priority process</li>
	<li>– N low-priority task</li>
	<li>– L has pages locked into memory (for real-time and custom IO)</li>
</ul>
</li><br/>
	<li>Change runlevel for X:
<ul>
	<li><strong>chkconfig &#8211;levels 345 X off</strong></li>
</ul>
</li>
</ul><br/><br/>
<h3>Firewall</h3>
#!/bin/bash<br/>
<br/>
iptables -F INPUT<br/>
iptables -F OUTPUT<br/>
iptables -F FORWARD<span style="color: #0000ff;">#flush all rules</span><br/>
<br/>
iptables -P INPUT ACCEPT<br/>
iptables -P OUTPUT ACCEPT<br/>
iptables -P FORWARD DROP<span style="color: #0000ff;">#define a default policy for a chain</span><br/>
<br/>
iptables -A INPUT -i eth0 -p tcp &#8211;dport http -j DROP <span style="color: #0000ff;">#drop all the incoming http traffic on eth0</span><br/>
iptables -A INPUT -i eth0 -p tcp -s 20.0.0.0/24 -j DROP <span style="color: #0000ff;">#drop all incoming connection from the given network</span><br/>
<br/>
iptables -A INPUT -p icmp &#8211;icmp-type echo-request -m limit &#8211;limit 1/second -j ACCEPT<br/>
iptables -A INPUT -p icmp &#8211;icmp-type echo-request -j DROP <span style="color: #0000ff;">#accept ping at a limit of 1 per second</span><br/>
<br/>
iptables -A INPUT -i eth0 -p tcp &#8211;dport ssh -s ! 10.200.0.1 -j REJECT<span style="color: #0000ff;">#reject all incoming ssh connection except coming from 10.200.0.1(don&#8217;t mean it&#8217;s accepted</span><br/>
iptables -A INPUT -i eth0 -p tcp &#8211;dport ssh -s ! 10.0.0.0/16 -j ACCEPT<span style="color: #0000ff;">#accept all incoming ssh connection which come from anywhere else than 10.0.0.0/16 (so 10.200.0.1 accepted)</span><br/>
<br/>
iptables -A INPUT -m state &#8211;state ESTABLISHED,RELATED -j ACCEPT<span style="color: #0000ff;">#accpet incoming, related or established connection</span><br/>




<br/><br/>

<h3>Apache</h3>
<ul>
	<li><strong>UserDir disable</strong> Comment it in httpd.conf or apache2.conf to allow users public_html</li>
	<li><strong>NameVirtualHost *:80</strong> Uncomment it in the case it is</li>
	<li><strong>Basic virtual host</strong></li>
</ul>
<div id="_mcePaste" style="padding-left: 30px;">&lt;VirtualHost *:80&gt;</div>
<div id="_mcePaste" style="padding-left: 60px;">ServerAdmin robin@robindavid.fr</div>
<div id="_mcePaste" style="padding-left: 60px;">DocumentRoot /home/robin/public_html/web</div>
<div id="_mcePaste" style="padding-left: 60px;">ServerName mywebsite.robindavid.fr</div>
<div style="padding-left: 60px;">ErrorLog logs/mywebsite.robindavid.fr-error_log</div>
<div id="_mcePaste" style="padding-left: 60px;">CustomLog logs/mywebsite.robindavid.fr-access_log common</div>
<div id="_mcePaste" style="padding-left: 30px;">&lt;/VirtualHost&gt;</div>
<div></div><br/>
<div>
<ul>
	<li><strong>More complex virtual host</strong></li>
</ul>
<div style="padding-left: 30px;">&lt;VirtualHost *:80&gt;</div>
<div style="padding-left: 60px;">ServerAdmin robin@robindavid.fr</div>
<div id="_mcePaste" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 60px; margin: 0px;">DocumentRoot /home/robin/public_html/web</div>
<div id="_mcePaste" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 60px; margin: 0px;">ServerName mywebsite.robindavid.fr</div>
<div>
<div style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 60px; margin: 0px;">ErrorLog logs/mywebsite.robindavid.fr-error_log</div>
<div id="_mcePaste" style="padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 60px; margin: 0px;">CustomLog logs/mywebsite.robindavid.fr-access_log common</div>
</div>
<div style="padding-left: 60px;">ServerAlias web.robindavid.fr <span style="color: #0000ff;">#give virtual host alias</span></div>
<div style="padding-left: 60px;"><span style="color: #0000ff;"> </span>RewriteEngine on<span style="white-space: pre;"> </span><span style="color: #0000ff;">#activate rewrite engine</span></div>
<div style="padding-left: 60px;"><span style="color: #0000ff;"> </span>RewriteCond %{HTTP_HOST} ^website&#46;<span style="white-space: pre;"> </span><span style="color: #0000ff;">#if host address start by website</span><span style="white-space: pre;"> </span></div>
<div style="padding-left: 60px;"><span style="white-space: pre;"> </span>RewriteCond %{REQUEST_URI} !~robin<span style="white-space: pre;"> </span><span style="color: #0000ff;">#and uri does not contain ~robin</span></div>
<div style="padding-left: 60px;"><span style="color: #0000ff;"> </span>RewriteRule ^(.*)$ http://redirect.robindavid.fr$1 [L,R]<span style="white-space: pre;"> </span><span style="color: #0000ff;">#redirect the host to the given host keeping the same path</span></div>
<div style="padding-left: 30px;">&lt;/VirtualHost&gt;</div>
<div style="padding-left: 30px;"></div><br/><br/>

<div>
<ul>
	<li>Allow user to use authentication. Add before # &lt;Directory /home/*/public_html&gt;:</li>
</ul>
<div style="padding-left: 60px;">&lt;Directory /home/*/public_html&gt;</div>
<div style="padding-left: 60px;">AllowOverride AuthConfig</div>
<div style="padding-left: 60px;">&lt;/Directory&gt;</div>
<div style="padding-left: 60px;"></div>
</div><br/>

<div>
<ul>
	<li><strong>htpasswd -s mypassfile richard</strong>
<ul>
	<li>#add user richard in mypassfile</li>
	<li># -s force usage of SHA(optionnal)</li>
</ul>
</li>
</ul>
</div><br/>
<div>
<ul>
	<li>Then in the folder you want to secure create a file .htaccess and put in:</li>
</ul>
<div style="padding-left: 30px;">AuthType Basic</div>
<div style="padding-left: 30px;">AuthName &#8220;Restricted Fodler !&#8221;</div>
<div style="padding-left: 30px;">AuthUserFile /home/robin/mypassfile</div>
<div style="padding-left: 30px;">Require user richard</div>
<div style="padding-left: 30px;"></div>
</div>
</div>
<ul>
	<li>For groups it&#8217;s quite the same create a file in call mygroup
<ul>
	<li>put in magic: richard</li>
	<li>mean that richard is in the group magic</li>
</ul>
</li>
</ul>
<ul>
	<li>And the two following lines to the existing .htaccess
<ul>
	<li>AuthGroupFile /home/robin/mygroup</li>
	<li>Require group magic</li>
</ul>
</li>
</ul></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/10/15/setup-a-proper-openbsd/">Setup a Proper OpenBSD</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-10-15T00:00:00+00:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><br/>Just after the OpenBSD install, the packet manager is not setup, the ntfs support is not patched in the kernel..
Following the instructions you will be able to have an operationnal OpenBSD quick.

<span style="color: #0000ff;">Note: All operations have been done with OpenBSD 4.6 on an i386 architecture. Replace it with your version and your architecture.</span><br/><br/>
<div id="_mcePaste">
<ul>
	<li><strong>echo &#8220;export PKG_PATH=ftp://ftp.fr.openbsd.org/pub/OpenBSD/4.6/packages/`machine -a` &gt;&gt; ~/.profile</strong></li>
</ul>
</div>
<div id="_mcePaste" style="padding-left: 30px;">It setup the path for repository. (It will be setup by reloading your console).</div>
<div style="padding-left: 30px;"></div><br/>
<div>
<ul>
	<li>activate wsmoused in /etc/rc.conf to get the mouse in console.</li><br/>
	<li>To increase the screen console resolution do :</li>
</ul>
<div style="padding-left: 60px;"><strong>echo &#8220;wsfontload -h 8 -e ibm /usr/share/misc/pcvtfonts/vt220l.808&#8221; &gt;&gt; /etc/rc.local</strong></div>
<div style="padding-left: 60px;"><strong>echo &#8220;wsconscfg -dF 5&#8221; &gt;&gt; /etc/rc.local</strong></div>
<div style="padding-left: 60px;"><strong>echo &#8220;wsconscfg -t 80x50 5&#8221; &gt;&gt; /etc/rc.local</strong></div>
<div></div><br/>
<div>
<ul>
	<li>By default OpenBSD never shutdown, but always reboot, if you want to change this behavior edit /etc/rc.shutdown to allow to shutdown.</li><br/>
	<li>To activate web server edit /etc/rc.conf</li><br/>
	<li>To generate rsa certificate for the server use :</li>
</ul>
</div>
<div style="padding-left: 30px;"><strong>openssl genrsa -out /etc/ssl/private/server.key 2048</strong></div>
<div style="padding-left: 30px;"><strong>openssl req -new -key /etc/ssl/private/server.key -out /etc/ssl/private/server.csr</strong></div>
<div style="padding-left: 30px;">And if you want to sign your CSR use :</div>
<div style="padding-left: 30px;"><strong>openssl x509 -req -days 365 -in /etc/ssl/private/server.csr -signkey /etc/ssl/private/server.key -out /etc/ssl/server.crt</strong></div>
<div></div><br/>
<div>
<ul>
	<li>To activate binary compatibility with linux uncomment the &#8220;kern.emul.linux&#8221; lines in rc.confg or sysctl.conf (I never remember ^^).</li><br/>
	<li>If you run an i386 system you can activate ntfs read-only support in the kernel:</li>
</ul>
</div>
<div style="padding-left: 30px;"><strong>cd /usr</strong></div>
<div style="padding-left: 30px;"><strong>ftp ftp://ftp.fr.openbsd.org/pub/OpenBSD/4.6/sys.tar.gz</strong></div>
<div style="padding-left: 30px;"><strong>cd src/</strong></div>
<div style="padding-left: 30px;"><strong>tar xzf ../sys.tar.gz</strong></div>
<div style="padding-left: 30px;"><strong>rm ../sys.tar.gz</strong></div>
<div></div>
<div></div>
<div style="padding-left: 30px;"><strong>cd /usr/src/sys/arch/i386/conf</strong></div>
<div style="padding-left: 30px;"><strong>config GENERIC</strong></div>
<div style="padding-left: 30px;"># edit GENERIC and activate option in</div>
<div style="padding-left: 30px;"><strong>cd ../compile/GENERIC</strong></div>
<div style="padding-left: 30px;"><strong>make clean &amp;&amp; make depend &amp;&amp; make</strong></div>
<div style="padding-left: 30px;"><strong>make install</strong></div>
<div></div><br/>
<div>
<ul>
	<li>Create the tree of ports</li>
</ul>
</div>
<div style="padding-left: 30px;"><strong>cd /tmp</strong></div>
<div style="padding-left: 30px;"><strong>ftp ftp://ftp.fr.openbsd.org/pub/OpenBSD/4.6/ports.tar.gz</strong></div>
<div style="padding-left: 30px;"><strong>cd /usr</strong></div>
<div style="padding-left: 30px;"><strong>tar xzf /tmp/ports.tar.gz</strong></div>
</div>
<div></div><br/>
<div>Your system is now more or less ready to run, you have package manager configured, your tree of ports and few options activated. It&#8217;s preferable to reboot the machine, to activate all changes.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/10/15/repair-grub-2-with-chroot/">Repair Grub 2 With Chroot</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-10-15T00:00:00+00:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><ul>
	<li><strong>mount -o bind /dev /mnt/dev</strong></li>
	<li><strong>mount -o bind /proc /mnt/proc</strong></li>
	<li><strong>mount sysfs /mnt/sys -t sysfs</strong></li>
	<li><strong>chroot /bin/bash /</strong></li>
</ul>

<p>and in the chrooted shell :</p>

<ul>
	<li><strong>grub-install /dev/sda</strong></li>
	<li><strong>grub-setup</strong></li>
	<li><strong>update-grub2</strong></li>
</ul>
<p><span style="color: #0000ff;">Note: In this example I install the MBR on /dev/sda but if it&#8217;s not your case you can change.</span></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/10/15/openvas-memo/">OpenVAS Memo</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-10-15T00:00:00+00:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content">OpenVAS is more or less the equivalent for Nessus, in the free world. Let&#8217;s try to do an audit of a server.
<br/><h5>OpenVAS audit</h5>
<ul>
	<li>On the server :
<ul>
	<li>install :
<ul>
	<li><strong>openvas-server</strong> and <strong>openvas-plugins</strong></li>
</ul>
</li>
	<li>Update plugins :
<ul>
	<li><strong>openvas-nvt-sync</strong></li>
</ul>
</li>
	<li>Create a server certificate :
<ul>
	<li><strong>openvas-mkcert</strong></li>
</ul>
</li>
	<li>Create a user :
<ul>
	<li><strong>openvas-adduser</strong></li>
</ul>
</li>
	<li>Finally launch the deamon :
<ul>
	<li><strong>openvasd -D</strong></li>
</ul>
</li>
</ul>
</li>
	<li>On the client :
<ul>
	<li>Install :
<ul>
	<li><strong>openvas-client</strong> (or something like that)</li>
</ul>
</li>
	<li>launch :
<ul>
	<li><strong>OpenVAS-Client</strong></li>
</ul>
</li>
</ul>
</li>
	<li>Create a task and a scope on the client. Activate all plugins, connect to the server and launch the audit. Wait &#8230;</li>
	<li>Save the result in the Nessus format. To do this select the result and do export in &#8220;nbe&#8221; format.</li>
</ul><br/>
Now that we have retrieve lot&#8217;s of informations about the server, we just have to try to exploit them with metasploit.

On the client launch :<strong> msfconsole</strong>
<br/>
<span style="color: #0000ff;">Note: You need to install the metasploit framework before.</span>
<ul>
	<li>In the msfconsole prompt try to create a new database with :</li>
</ul>
<p style="padding-left: 30px;"><strong>db_connect my_scan</strong></p>
<p style="padding-left: 30px;"><span style="color: #0000ff;">Note : If everything works fine you&#8217;re lucky, otherwise you should try to find the missing packet or shared library. Considering that the sql database use is sqlite.</span></p>

<ul>
	<li>You should now import the report :</li>
</ul>
<p style="padding-left: 30px;"><strong>db_import_nessus_nbe report.nbe</strong></p>
<p style="padding-left: 30px;"></p>

<ul>
	<li>You could see somes report informations with the following commands:</li>
</ul>
<p style="padding-left: 30px;"><strong>db_vulns,db_services,db_hosts</strong></p>

<ul>
	<li>You now just have to launch the autopwn:</li>
</ul>
<p style="padding-left: 30px;"><strong>db_autopwn -t -x -b -e</strong></p>

<ul>
	<li>If vulnerability are successfully exploited sessions are created(with a meterpreter session for ex). To see sessions type :</li>
</ul>
<p style="padding-left: 30px;"><strong>sessions -l</strong></p>

<ul>
	<li>And select anyone with :</li>
</ul>
<p style="padding-left: 30px;"><strong>sessions -i [number]</strong></p>
<br/><br/>
<h5>Another alternative is to use nmap to create the report</h5>
By this way you don&#8217;t need to install anything on the server. You just need nmap on the client.
<ul>
	<li>We create a new database :
<ul>
	<li><strong>db_connect scan_nmap</strong></li>
</ul>
</li>
	<li>Launch the scan of  the server :
<ul>
	<li><strong>db_nmap -T4 -F 192.168.1.0-254</strong></li>
</ul>
</li>
	<li>Like above we can see informations with these commands :
<ul>
	<li><strong>db_hosts,db_services,db_vulns</strong></li>
</ul>
</li>
	<li>We launch the autopwn :
<ul>
	<li><strong>db_autopwn -t -p -b -e</strong></li>
</ul>
</li>
	<li>If exploitation succeed sessions are created :
<ul>
	<li><strong>sessions -l</strong></li>
</ul>
</li>
	<li>And you can connect to with :
<ul>
	<li><strong>sessions -i [number]</strong></li>
</ul>
</li>
</ul>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/10/15/hping3-memo/">Hping3 Memo</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-10-15T00:00:00+00:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content">Below a memo about hping3&#8230;
<div id="_mcePaste">
<ul>
	<li>Importants options :
<ul>
	<li><strong>-i</strong> define the interval time between each packet in sec.</li>
	<li><strong>-c</strong> define the number of packets to send (without wait Ctrl+c to end)</li>
	<li><strong>-V</strong> verbose mode</li>
	<li><strong>-p</strong> port</li>
	<li><strong>-2</strong> for UDP (without it&#8217;s TCP)</li>
	<li>But there is too:
<ul>
	<li><strong>-0</strong> raw ip</li>
	<li><strong>-1</strong> icmp</li>
	<li><strong>-8</strong> scan</li>
	<li><strong>-9</strong> listen mode</li>
</ul>
</li>
	<li><strong>-d</strong> Allow to change the body size of the packet (default 0)</li>
	<li><strong>-S</strong> to put SYN flag to 1, but there is too -A for ACK, R RST, P PUSH, F FIN et U URG</li>
</ul>
</li>
</ul>
</div>
<div id="_mcePaste">
<ul>
	<li>Few examples :
<ul>
	<li><strong>hping3 -V -c 1 -2 -p 2048 192.168.1.15</strong></li>
	<li>Send one UDP packet on the port 2048 of the host 192.168.1.15.</li>
	<li><strong>hping3 -c 1 -S -p 23 192.168.1.15</strong></li>
	<li>Use the flag SYN (-S), to try establish a connection (if server return syn=1 ack=1 port is open)</li>
	<li><strong>hping3 -S 192.168.1.15 -p ++21</strong></li>
	<li>Scan the specified host from port 21</li>
	<li><span style="color: #0000ff;">Note: Hping print just those who answer (SA)</span></li>
	<li><strong>hping3 -V &#8211;scan &#8220;20-90&#8221; -S 192.168.1.15</strong></li>
	<li>Scan a port range (20-90)</li>
</ul>
</li>
</ul>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/10/15/ettercap-memo/">Ettercap Memo</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-10-15T00:00:00+00:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>ARP poisoning</h2>

<ol>
<li>Launch ettercap in root</li>
<li>Sniff/Unified .. / eth0</li>
<li>Host/scan for hosts (do it multiples times to find more</li>
<li>Host list to see all available hosts</li>
<li>Add the gateway in target 1</li>
<li>Add the victim in target 2</li>
<li>Menu mitm / arp poisoning</li>
</ol>


<h2>DNS Poisoning</h2>

<p>edit <em>/usr/local/share/ettercap/etter.dns</em> or <em>/usr/share/ettercap/etter.conf</em>
and change for instance:</p>

<p>microsoft.com A 198.12.196.56</p>

<p>by</p>

<p>microsoft.com A 192.168.1.16</p>

<p>Don&rsquo;t forget to activate <strong>DNS Spoof</strong> in plugins</p>

<h2>Filters</h2>

<p>Allow to change word on the fly in trafic</p>

<ol>
<li>edit <em>/usr/local/share/ettercap/etter.filter</em> or <em>/usr/share/ettercap/etter.filter</em></li>
<li>Add for instance:</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>if (ip.proto == TCP && search(DATA.data, "rocks") ) {
</span><span class='line'>    log(DATA.data, "/tmp/alter_ettercap.log");
</span><span class='line'>    replace("rocks", "sucks");
</span><span class='line'>    msg("Rocks substituted and logged.\n");
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>The filter file shoud then be &ldquo;compiled&rdquo; with: <strong>etterfilter -o fichier.ef etter.filter</strong></p>

<p>And load the filter in filter/load a filter</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/3/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section id="titles">
<!--   <a href="http://www.robindavid.fr" title="Robin David"><img id="logo" src="http://www.robindavid.fr/images/" /></a> &#8211;>
  <h1 id="site_title"><a href="http://www.robindavid.fr" title="Robin David"><i class="fa fa-pagelines"></i>Robin David</a></h1>
  <h3 id="site_subtitle">A site to remotly back up my brain.</h3>
</section>
<section>
<!--   <h1 class="fa fa-pagelines"> Robin David</h1> &#8211;>
  <!-- Picture if needed -->


  <div style="text-align:center;" class='contact'>
	  <img src="http://www.gravatar.com/avatar/4e787cbb6531b2b9c0ab5015f97bf421?s=200" alt="Gravatar of Robin David " title="Gravatar of Robin David" /><br/>
    <a href='mailto:dev.robin.david[.at.]gmail[dot]com'><i class='fa fa-envelope fa-2x'></i></a>
    <a href='http://github.com/RobinDavid' title='github'><i class='fa fa-github-square fa-2x'></i></a>
    <a href='http://www.linkedin.com/pub/robin-david/85/46/173/en' title='linkedin'><i class='fa fa-linkedin fa-2x'></i></a>
    <a href='/atom.xml' title='rss'><i class='fa fa-rss fa-2x'></i></a>
  </div>

</section>
<section id="menu">
<ul class="main-navigation" style="font-size:1.5em;font-weight:bold;">
  <li><a href="/"><i  class="fa fa-home"></i> &nbsp;&nbsp;Home</a></li>
  <li><a href="/blog"><i  class="fa fa-th-list"></i> &nbsp;&nbsp;Blog</a></li>
  <li><a href="/opencv-tutorial"><i class="fa fa-picture-o"></i> &nbsp;&nbsp;Tuto OpenCV</a></li>
  <li><a href="/links"><i  class="fa fa-chain"></i> &nbsp;&nbsp;Links</a></li>
  <li><a href="/blog/archives"><i class="fa fa-folder-open"></i> &nbsp;&nbsp;Archives</a></li>
</ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/01/28/raspberry-pi-first-config-and-services-configuration/">Raspberry Pi: First config and services configuration</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/10/08/windows-forensic-memo/">Windows Forensic Memo</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/16/wikipedia-frequency-analysis/">Wikipedia frequency analysis</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/15/useful-basic-function-python-memo/">Basic but useful function python Memo</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/15/kasiski-babbage-cryptanalysis-in-python/">Kasiski-Babbage cryptanalysis in Python</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/RobinDavid">@RobinDavid</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'RobinDavid',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>

<section>
  <h1>Categories</h1>
  <ul id="categories">
    <li class='category'><a href='/blog/categories/autoit/'>AutoIt</a> (1)</li>
<li class='category'><a href='/blog/categories/bsd/'>BSD</a> (1)</li>
<li class='category'><a href='/blog/categories/bash/'>Bash</a> (4)</li>
<li class='category'><a href='/blog/categories/cryptography/'>Cryptography</a> (2)</li>
<li class='category'><a href='/blog/categories/linux/'>Linux</a> (7)</li>
<li class='category'><a href='/blog/categories/linux-security/'>Linux Security</a> (3)</li>
<li class='category'><a href='/blog/categories/memo/'>Memo</a> (3)</li>
<li class='category'><a href='/blog/categories/network/'>Network</a> (1)</li>
<li class='category'><a href='/blog/categories/piece-of-code/'>Piece of Code</a> (5)</li>
<li class='category'><a href='/blog/categories/raspberry-pi/'>Raspberry Pi</a> (1)</li>
<li class='category'><a href='/blog/categories/windows/'>Windows</a> (1)</li>

  </ul>
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Robin David -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
